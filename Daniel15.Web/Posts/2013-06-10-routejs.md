---
id: 339
title: RouteJs - ASP.NET MVC URL routing for JavaScript
published: true
publishedDate: 2013-06-10 01:10:34Z
lastModifiedDate: 2013-06-10 01:10:34Z
summary: RouteJs is a library for doing ASP.NET MVC URL routing in JavaScript. This blog posts introduces RouteJs and its core features, explains why you should use it, and provides some simple examples.
categories:
- C#
- Web Development

---

<p>One of the most powerful features of ASP.NET MVC is its URL routing engine. The routing engine in ASP.NET MVC is used to route incoming requests to the correct controller action, but it can also generate URLs for you. This is normally done with the URL helper in views:</p>

<pre class="brush: csharp">
// Regular ASP.NET MVC:
@Url.Action("View", "Blog", new { id = 123 })
// With T4MVC:
@Url.Action(MVC.Blog.View(123))
</pre>

<p>This is great, as it means changing your routes will automatically update all the internal URLs throughout your site.  If you're using <a href="http://t4mvc.codeplex.com/" rel="nofollow">T4MVC</a> (which I strongly suggest), you also get compile time checking on your URLs, which means that it's literally impossible to have broken internal links (any invalid links will throw a compile error).</p>

<p>This is all well and good on the server side, but there's no equivalent on the client side, meaning that people often use one of these approaches:</p>
<ul>
<li>Hard-code URL in JavaScript directly</li>
<li>Store the URL in a data attribute on the relevant element (or body)</li>
<li>Create a global JavaScript object containing all the URLs the page requires (for example, <a href="http://jarrettmeyer.com/blog/2012/06/26/getting-asp-dot-net-mvc-routes-into-javascript" rel="nofollow">Jarret Meyer's approach</a>)</li>
</ul>
<p>Each of these approaches has its downsides. The last one is the most promising, and I had the idea of generalising this approach and making it into a library that can be dropped into any site. There are some existing projects that tackle this problem, the main one being <a href="http://weblogs.asp.net/zowens/archive/2010/12/20/asp-net-mvc-javascript-routing.aspx" rel="nofollow">Zack Owens' ASP.NET MVC JavaScript Routing</a>. Zack's library looked good but I had two issues with it:</p>
<ul>
<li>It's unnecessarily tightly coupled with jQuery, meaning you have to load the whole of jQuery just to use it, which is annoying if your site is just vanilla JavaScript or uses a library like PrototypeJS or MooTools instead.</li>
<li>It requires you to use a custom routing syntax rather than the standard ASP.NET MVC routing</li>
</ul>

<p>I decided to write my own library to solve this problem. My library is called <a href="https://github.com/Daniel15/RouteJs">RouteJs</a>, and it is available on NuGet. It supports ASP.NET MVC 2, 3 and 4. Basically, RouteJs consists of a small piece of JavaScript to handle building URLs, as well as some information about all the routes you want to expose. All of this is served using an ASP.NET handler, so you don't need to change your build scripts or anything like that. Simply drop it into your site.</p>

<p>Once loaded in your site, RouteJs provides a global Router object, similar to the URL helper that comes with ASP.NET MVC. For example, the same blog view URL can be generated with the following code:</p>
<pre class="brush: javascript">
var url = Router.action('Blog', 'View', { id = 123 });
</pre>

<p>It supports most of the common features of ASP.NET MVC routing, including areas, default values and simple constraints. It does not currently support ASP.NET WebAPI, but I'll definitely add support if someone requests it.</p>

<p>For more information, please see the <a href="https://github.com/Daniel15/RouteJs">readme on Github</a>. Please let me know what you think!</p>

<p>Until next time,<br />
&mdash; Daniel</p>
